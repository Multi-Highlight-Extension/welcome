var content=function(){"use strict";var F=Object.defineProperty;var L=(u,l,g)=>l in u?F(u,l,{enumerable:!0,configurable:!0,writable:!0,value:g}):u[l]=g;var h=(u,l,g)=>L(u,typeof l!="symbol"?l+"":l,g);var T,I;function u(i){return i}const l=["#4A90E2","#FFA500","#50C878","#FF69B4","#8A2BE2"],g={matches:["<all_urls>"],main(){function i(n,s,a,o){const c=document.createElement("span");c.className="highlighted",c.style.color="#fff",c.style.backgroundColor=o,c.style.borderRadius="10px",c.style.padding="2px 6px";const d=n.splitText(s);d.splitText(a.length);const C=d.cloneNode(!0);c.appendChild(C),d.parentNode.replaceChild(c,d)}function t(n,s){let a=0,o;if(n.nodeType==3)for(o=0;o<s.length;o++){const c=s[o].toLowerCase(),d=n.data.toLowerCase().indexOf(c);0<=d&&(i(n,d,c,l[o%l.length]),a=1)}else if(n.nodeType==1&&!/(script|style|textarea)/i.test(n.tagName)&&n.childNodes)for(o=0;o<n.childNodes.length;o++)o+=t(n.childNodes[o],s);return a}function e(n){let s;for(;s=n.querySelector("span.highlighted");)s.outerHTML=s.innerHTML}function r(n){var s,a;(a=(s=chrome.storage)==null?void 0:s.local)==null||a.get(["keywords","isActive"],o=>{o.keywords&&Array.isArray(o.keywords)&&o.isActive&&(e(n),t(n,o.keywords)),o.isActive||e(n)})}chrome.runtime.onMessage.addListener((n,s,a)=>(n.type==="updateHighlight"&&(a({status:"ok"}),r(document.body)),n.type==="removeHighlight"&&(a({status:"ok"}),e(document.body)),!0))}},p=(I=(T=globalThis.browser)==null?void 0:T.runtime)!=null&&I.id?globalThis.browser:globalThis.chrome;function m(i,...t){}const y={debug:(...i)=>m(console.debug,...i),log:(...i)=>m(console.log,...i),warn:(...i)=>m(console.warn,...i),error:(...i)=>m(console.error,...i)},w=class w extends Event{constructor(t,e){super(w.EVENT_NAME,{}),this.newUrl=t,this.oldUrl=e}};h(w,"EVENT_NAME",S("wxt:locationchange"));let E=w;function S(i){var t;return`${(t=p==null?void 0:p.runtime)==null?void 0:t.id}:content:${i}`}function N(i){let t,e;return{run(){t==null&&(e=new URL(location.href),t=i.setInterval(()=>{let r=new URL(location.href);r.href!==e.href&&(window.dispatchEvent(new E(r,e)),e=r)},1e3))}}}const f=class f{constructor(t,e){h(this,"isTopFrame",window.self===window.top);h(this,"abortController");h(this,"locationWatcher",N(this));h(this,"receivedMessageIds",new Set);this.contentScriptName=t,this.options=e,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(t){return this.abortController.abort(t)}get isInvalid(){return p.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(t){return this.signal.addEventListener("abort",t),()=>this.signal.removeEventListener("abort",t)}block(){return new Promise(()=>{})}setInterval(t,e){const r=setInterval(()=>{this.isValid&&t()},e);return this.onInvalidated(()=>clearInterval(r)),r}setTimeout(t,e){const r=setTimeout(()=>{this.isValid&&t()},e);return this.onInvalidated(()=>clearTimeout(r)),r}requestAnimationFrame(t){const e=requestAnimationFrame((...r)=>{this.isValid&&t(...r)});return this.onInvalidated(()=>cancelAnimationFrame(e)),e}requestIdleCallback(t,e){const r=requestIdleCallback((...n)=>{this.signal.aborted||t(...n)},e);return this.onInvalidated(()=>cancelIdleCallback(r)),r}addEventListener(t,e,r,n){var s;e==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),(s=t.addEventListener)==null||s.call(t,e.startsWith("wxt:")?S(e):e,r,{...n,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),y.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:f.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(t){var s,a,o;const e=((s=t.data)==null?void 0:s.type)===f.SCRIPT_STARTED_MESSAGE_TYPE,r=((a=t.data)==null?void 0:a.contentScriptName)===this.contentScriptName,n=!this.receivedMessageIds.has((o=t.data)==null?void 0:o.messageId);return e&&r&&n}listenForNewerScripts(t){let e=!0;const r=n=>{if(this.verifyScriptStartedEvent(n)){this.receivedMessageIds.add(n.data.messageId);const s=e;if(e=!1,s&&(t!=null&&t.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",r),this.onInvalidated(()=>removeEventListener("message",r))}};h(f,"SCRIPT_STARTED_MESSAGE_TYPE",S("wxt:content-script-started"));let b=f;function k(){}function v(i,...t){}const A={debug:(...i)=>v(console.debug,...i),log:(...i)=>v(console.log,...i),warn:(...i)=>v(console.warn,...i),error:(...i)=>v(console.error,...i)};return(async()=>{try{const{main:i,...t}=g,e=new b("content",t);return await i(e)}catch(i){throw A.error('The content script "content" crashed on startup!',i),i}})()}();
content;
